{{ define "main" }}
  <!-- Landingpage Hero Section -->

  <section class="flex flex-col items-center justify-center">
    <!-- Hero Text -->
    <h1 class="mb-6 text-center text-3xl font-bold sm:text-5xl">
      {{ .Title | markdownify }}
    </h1>
    <p class="mb-8 max-w-xl text-center text-lg sm:text-3xl">
      {{ .Description }}
    </p>

    <div class="relative h-96 w-full max-w-4xl md:h-[600px] lg:h-[700px]">
      {{ $images := .Params.gallery }}
      {{ range $index, $img := $images }}
        <div
          class="slide {{ if eq $index 0 }}
            opacity-100
          {{ else }}
            opacity-0 pointer-events-none
          {{ end }} absolute inset-0 transition-opacity duration-700 ease-in-out">
          <img
            src="{{ $img.img }}"
            alt="{{ $img.alt }}"
            class="h-full w-full rounded-lg object-cover shadow-2xl" />
        </div>
      {{ end }}


      <!-- Dots -->
      <div
        class="absolute right-0 bottom-4 left-0 flex justify-center space-x-2">
        {{ range $index, $img := $images }}
          <button
            class="dot {{ if eq $index 0 }}
              bg-cyan-600
            {{ end }} h-3 w-3 cursor-pointer rounded-full bg-gray-600 transition-colors duration-300"
            data-index="{{ $index }}"></button>
        {{ end }}
      </div>
    </div>
  </section>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const slides = document.querySelectorAll(".slide");
      const dots = document.querySelectorAll(".dot");
      let current = 0;
      const total = slides.length;

      function showSlide(index) {
        slides.forEach((s, i) => {
          if (i === index) {
            s.classList.remove("opacity-0", "pointer-events-none");
            s.classList.add("opacity-100");
          } else {
            s.classList.remove("opacity-100");
            s.classList.add("opacity-0", "pointer-events-none");
          }
        });

        dots.forEach((d, i) => d.classList.toggle("bg-cyan-600", i === index));
        dots.forEach((d, i) => d.classList.toggle("bg-gray-600", i !== index));
        current = index;
        resetTimer();
      }

      // Auto-Slide Funktion
      function nextSlide() {
        showSlide((current + 1) % total);
      }

      let interval = setInterval(nextSlide, 5000);

      function resetTimer() {
        clearInterval(interval);
        interval = setInterval(nextSlide, 5000);
      }

      // Klick auf Dot
      dots.forEach((dot) => {
        dot.addEventListener("click", () => {
          const index = parseInt(dot.getAttribute("data-index"));
          showSlide(index);
        });
      });

      // Swipe-Unterstützung
      let startX = 0;
      let endX = 0;
      const threshold = 50; // minimale Swipe-Distanz in px
      const slider = document.querySelector(".relative");

      slider.addEventListener("touchstart", (e) => {
        startX = e.touches[0].clientX;
      });

      slider.addEventListener("touchmove", (e) => {
        endX = e.touches[0].clientX;
      });

      slider.addEventListener("touchend", () => {
        const diffX = endX - startX;
        if (Math.abs(diffX) > threshold) {
          if (diffX < 0) {
            // Swipe nach links → nächstes Bild
            showSlide((current + 1) % total);
          } else {
            // Swipe nach rechts → vorheriges Bild
            showSlide((current - 1 + total) % total);
          }
        }
        startX = 0;
        endX = 0;
      });

      // Initial anzeigen
      showSlide(0);
    });
  </script>
{{ end }}
